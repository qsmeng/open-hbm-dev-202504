# 半数黑金（Half Black Money）AI 编程规则

## 编码语言与技术栈
- **后端**：Python 3.12，使用 FastAPI 提供 RESTful API 接口。
- **前端**：Vue3 + Vite，用于构建现代化的单页应用。
- **数据库**：MySQL 8.0，用于存储结构化数据；Redis 作为缓存系统。
- **AI 功能**：LangChain 和 Ollama，结合 OpenAI API 实现动态故事生成和对话逻辑。
- **容器化**：Docker + Nginx 部署服务。

## 代码风格
- **命名规范**：
  - 项目文件命名 驼峰命名,例如`backend\ai\ollamaByLangchain.py`
  - 测试文件命名 `test_`+文件路径+要测试的文件名,统一放在在tests文件夹目录。例如 `backend\tests\test_modules_game_core.py`
- **注释规范**：
  - 每个模块或函数需添加简要注释，说明其功能和主要逻辑。
  - 使用 `# TODO:` 标记未完成的功能或需要优化的代码。
  - **测试文件注释**：
    - 测试文件只需在模块级标明测试对应的功能模块
    - 测试方法需简要说明测试的功能点
    - 不需要详细的实现逻辑注释
    - 保持测试断言清晰可读
- **缩进**：
  - Python 使用 4 个空格缩进。
  - JavaScript 和 HTML 使用 2 个空格缩进。
- **日志级别**：日志记录需明确级别，DEBUG 用于开发调试，INFO 用于常规操作，WARNING 和 ERROR 用于异常情况。

## 参考文档与开发流程
在开发过程中，需参考以下文档以确保术语一致性和逻辑清晰：
- [README.md](Readme.md)：项目概述与基本使用说明（设计阶段必读）
- [名词解释文档](docs\名词解释.md)：统一项目术语（编码阶段实时参考）
- [项目架构设计文档](docs\项目架构设计.md)：明确系统架构与技术选型（模块设计前置条件）
- [任务管理文档](docs\任务管理.md)：跟踪开发任务进度（迭代过程核心依据）

## 特殊规则
异步操作：所有涉及 I/O 的操作（如数据库查询、API 调用）需统一使用 async/await。
错误处理：每个接口需包含 try-catch 块，确保异常被捕获并返回友好的错误信息。
代码规范：新模块开发必须参考现有实现模式。
禁止全局变量：避免在模块中使用全局变量，推荐通过函数参数传递数据。
日志记录：关键操作需记录日志，格式参见`utils/logger.py`。
